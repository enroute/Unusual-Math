
\chapter{逻辑}
\label{chap:logic}
\def\BKC{\cellcolor{gray!50}}   % cell background color

\section{排除法}
\begin{example}
  警察在审问四个嫌疑犯：甲，乙，丙，丁。他们的回话如下：
  \fbox{\parbox{\textwidth}{
      \begin{itemize}
      \item 甲说：我不是罪犯
      \item 乙说：丁是罪犯
      \item 丙说：乙是罪犯
      \item 丁说：我不是罪犯
      \end{itemize}
    }}
  研究完其它材料后警察发现以上四人只有一个人说假话。警察已经知道说假话的是罪犯，说真话的不是罪犯。那么，谁是罪犯？
\end{example}
\begin{proof}[提示]
  如果注意到乙和丁的话是互斥的，就会知道乙和丁中必有一人说的假话。从而甲和丙说的是真话，从而由丙的话可知乙说的是假话是罪犯。
  
  如果注意不到乙和丁的话是互斥的这一点，那么可以用通用的方法来找出说假话的人，即甲乙丙丁四人逐一排除，若剩余一人无法排除，则就是此人说假话。
  \begin{enumerate}
  \item 假设甲说假话，则其余三人说的都是真话，即以下四句为真：
    \begin{align*}
      \text{\numcircled1 甲是罪犯；\numcircled2 丁是罪犯；\numcircled3 乙是罪犯；\numcircled4 丁不是罪犯}
    \end{align*}
    从而有以下表格：

    \begin{center}
      \begin{tabular}{c|c|c|c|c}
        \hline
             & 甲 & 乙 & 丙 & 丁\\
        \hline
        罪犯 & $\checkmark^1$  & $\checkmark^3$  &    & $\checkmark^2\ \xmark^4$\\
        \hline
      \end{tabular}
    \end{center}

    其中\checkmark 代表此人是罪犯，$\xmark$代表此人不是罪犯，数字代表该符号对应于第几句话。由表格，可以看出两个矛盾的地方：\numcircled1 共有3个罪犯，但实际应只有一个罪犯；\numcircled2 丁既是罪犯又不是罪犯（既有\checkmark 符号，又有$\xmark$符号）。
    
    从而排除甲说假话。

  \item 假设乙说的假话，则其余三人说的是真话，即以下四句为真：
    \begin{align*}
      \text{\numcircled1 甲不是罪犯；\numcircled2 丁不是罪犯；\numcircled3 乙是罪犯；\numcircled4 丁不是罪犯}
    \end{align*}
    从而有以下表格：
    \begin{center}
      \begin{tabular}{c|c|c|c|c}
        \hline
             & 甲 & 乙 & 丙 & 丁\\
        \hline
        罪犯 & $\xmark^1$  & $\checkmark^3$  &    & $\xmark^2\ \xmark^4$\\
        \hline
      \end{tabular}
    \end{center}

    找不到矛盾。

  \item 假设丙说的是假话，则欺其余三人说的是真话，即以下四句为真：
    \begin{align*}
      \text{\numcircled1 甲不是罪犯；\numcircled2 丁是罪犯；\numcircled3 乙不是罪犯；\numcircled4 丁不是罪犯}
    \end{align*}
    从而有以下表格：

    \begin{center}
      \begin{tabular}{c|c|c|c|c}
        \hline
             & 甲 & 乙 & 丙 & 丁\\
        \hline
        罪犯 & $\xmark^1$  & $\xmark^3$  &    & $\checkmark^2\ \xmark^4$\\
        \hline
      \end{tabular}
    \end{center}
    从表格可以看出丁既是罪犯又不是罪犯，矛盾。排除丙说假话。
    
  \item 假设丁说的是假话，则欺其余三人说的是真话，即以下四句为真：
    \begin{align*}
      \text{\numcircled1 甲不是罪犯；\numcircled2 丁是罪犯；\numcircled3 乙是罪犯；\numcircled4 丁是罪犯}
    \end{align*}
    从而有以下表格：

    \begin{center}
      \begin{tabular}{c|c|c|c|c}
        \hline
             & 甲 & 乙 & 丙 & 丁\\
        \hline
        罪犯 & $\xmark^1$  & $\checkmark^3$  &    & $\checkmark^2\ \checkmark^4$\\
        \hline
      \end{tabular}
    \end{center}

    此处隐藏的条件是，说假话的是罪犯，说真话的不是罪犯。由于只有一个人说假话，从而只有一个罪犯，而由上面的表格容易看出乙和丁都是罪犯，这与只有一个罪犯矛盾。排除丁说假话。
  \end{enumerate}

  这样排除完甲丙丁三人，剩余一人，乙就是说假话的人，即罪犯就是乙。
\end{proof}


\begin{example}[歌唱家的年龄]
  甲乙丙丁四人正在讨论某位歌唱家的年龄：
  \begin{itemize}
  \item 甲说：她不会超过25岁。
  \item 乙说：她不会超过30岁。
  \item 丙说：她绝对在35岁以上。
  \item 丁说：她在40岁以下。
  \end{itemize}
  事实是这四人中只有一人说对了。那么请猜测下歌唱家的年龄范围。
\end{example}
\begin{proof}[提示]
  记歌唱家的真实年龄是$x$，那么四人的话等价于
  \begin{align*}
    \text{\numcircled1} x\le25,\quad \text{\numcircled2} x\le30,\quad \text{\numcircled3} x>35,\quad \text{\numcircled4} x<40
  \end{align*}
  如果用数轴表示，则会非常直观。

  \begin{center}
    \begin{tikzpicture}[scale=.2]
      \draw[<->](-5,0)--(55,0);
      \foreach \x in {0,10,20,30,40,50}{
        \draw(\x,0) node[below]{$\x$}--(\x,1);
      }
      \draw[->](25,0)--(25,3)--(-5,3)node[left]{$x\le25$};
      \draw[->](30,0)--(30,6)--(-5,6)node[left]{$x\le30$};
      \draw[->](35,0)--(35,3)--(55,3)node[right]{$x>35$};
      \draw[->](40,0)--(40,9)--(-5,9)node[left]{$x<40$};
      \draw[fill=black](25,0)circle(8pt) (30,0)circle(8pt);
      \draw[fill=white](40,0)circle(8pt) (35,0)circle(8pt);
    \end{tikzpicture}
  \end{center}
  或者下面这种表示方式：
  \begin{center}
    \begin{tikzpicture}[scale=.2]
      \draw[<->](-5,0)--(55,0);
      \foreach \x in {0,10,20,30,40,50}{
        \draw(\x,0) node[below]{$\x$}--(\x,1);
      }
      \draw[->,line width=2pt](25,-3)--(-5,-3)node[left]{$x\le25$};
      \draw[->,line width=2pt](30,-6)--(-5,-6)node[left]{$x\le30$};
      \draw[->,line width=2pt](35,-3)--(55,-3)node[right]{$x>35$};
      \draw[->,line width=2pt](40,-9)--(-5,-9)node[left]{$x<40$};
      \draw[fill=black](25,-3)circle(10pt) (30,-6)circle(10pt);
      \draw[fill=white](40,-9)circle(10pt) (35,-3)circle(10pt);
    \end{tikzpicture}
  \end{center}

  其中实心圈表示包含该点，空心圈表示不含此点。由上两图可以看出，只有$(30,35]$及$[40,+\infty)$这两个区间才是只被一个条件所覆盖的。
\end{proof}


\begin{example}
  有个遭遇到海难的人最终在一个小岛上顽强地生存了下来。有一天他被毒蛇咬伤了，需要用$3$升的纯净水来配药解毒，一点不能多一点不能少。但由于物资匮乏，他手里只有一个$5$升和$6$升的两个容器，以及之前他用蒸馏的方法获取到的足够多的备用纯净水。由于时间紧迫，请帮他用最少的步骤量出精确的$3$升纯净水。
\end{example}
\begin{proof}[提示]
  其中一种方法如表格~\ref{tab:water-ops}所示。经过若干步骤后6升容器里有纯净水3升。
  \begin{table}[htbp]
    \centering
    \caption{倒水操作}
    \label{tab:water-ops}
    \renewcommand*{\arraystretch}{1.0}
    \begin{tabular}{clcc}
      \toprule[1.5pt]
      % Use multicolumn to make the multirow center horizontally
      \multirow{2}{*}{步骤} & \multicolumn{1}{c}{\multirow{2}{*}{操作}} & \multicolumn{2}{c}{操作后容器含水量(升)} \\
      \cline{3-4}
           &      & $5$升容器 & $6$升容器 \\
      \midrule[1pt]
      0 & (开始状态)                       & 0 & 0\\
      \midrule[1pt]
      1 & 用备用纯净水灌满6升容器          & 0 & 6\\
      2 & 用6升容器里的水灌满5升容器       & 5 & 1\\
      3 & 清空5升容器                      & 0 & 1\\
      4 & 6升容器里的剩余的水全倒入5升容器 & 1 & 0\\
      5 & 用备用纯净水灌满6升容器          & 1 & 6\\
      6 & 用6升容器里的水灌满5升容器       & 5 & 2\\
      7 & 清空5升容器                      & 0 & 2\\
      8 & 6升容器里的剩余的水全倒入5升容器 & 2 & 0\\
      9 & 用备用纯净水灌满6升容器          & 2 & 6\\
     10 & 用6升容器里的水灌满5升容器       & 5 & 3\\
      \bottomrule[1.5pt]
    \end{tabular}
  \end{table}

  也可以用有向图的方法。记$(x,y)$分别为5升容器和6升容器中装了多少升水，则开始状态为$(0,0)$，目标状态为$(x,3)$或者$(3,y)$。
  \begin{center}\tiny
    \begin{tikzpicture}[scale=1.3]
      \node(N00)[draw,circle,pattern=north west lines,pattern color=blue!50]at(2,0){$0,0$};
      \node(N56)[draw,circle]at(1,0){$5,6$};

      \node(N50)[draw,circle]at(1,-1){$5,0$};
      \node(N05)[draw,circle]at(2,-1){$0,5$};
      \node(N55)[draw,circle]at(3,-1){$5,5$};
      \node(N46)[draw,circle]at(4,-1){$4,6$};
      \node(N40)[draw,circle]at(5,-1){$4,0$};
      \node(N04)[draw,circle]at(6,-1){$0,4$};
      \node(N54)[draw,circle]at(7,-1){$5,4$};
      \node(N36)[draw,circle,fill=red!50]at(8,-1){$3,6$};

      \node(N06)[draw,circle]at(1,1){$0,6$};
      \node(N51)[draw,circle]at(2,1){$5,1$};
      \node(N01)[draw,circle]at(3,1){$0,1$};
      \node(N10)[draw,circle]at(4,1){$1,0$};
      \node(N16)[draw,circle]at(5,1){$1,6$};
      \node(N52)[draw,circle]at(6,1){$5,2$};
      \node(N02)[draw,circle]at(7,1){$0,2$};
      \node(N20)[draw,circle]at(8,1){$2,0$};
      \node(N26)[draw,circle]at(9,1){$2,6$};
      \node(N53)[draw,circle,fill=red!50]at(10,1){$5,3$};

      \foreach \x/\y in{N00/N50,%
        N00/N06,N06/N51,N51/N01,N01/N10,N10/N16,N16/N52,N52/N02,N02/N20,N20/N26,N26/N53,%
        N05/N00%
      }{
        \draw[->](\x)--(\y);
      }
      \foreach \x/\y in{N06/N56,N50/N56,N50/N05,N05/N55,N55/N46,N46/N40,N40/N04,N04/N54,N54/N36}{
        \draw[->](\x)edge[bend left=20](\y);
        \draw[->](\y)edge[bend left=20](\x);
      }
      \foreach \x in{N40,N04}{
        \draw[->](\x)edge[bend right=20](N00);
      }
      \draw[->](N54)edge[bend left=30](N55);
      \draw[->](N54)edge[bend left=40](N50);
    \end{tikzpicture}
  \end{center}

  上图中箭头方向表示可由一个状态经过一个操作后到达另一个状态。当然，图中的结点及有向箭头是不全的\footnote{比如结点$(5,1)$经过一个操作后，可以达到的结点还有$(5,0)$、$(6,1)$，及$(5,6)$。}，但也足以给出两种可以量出3升水的操作路径。
\end{proof}

\begin{question}
  古时候有家酒馆的老板特别节省，他只购买了一个7两和一个11两的勺子给客人打酒。有个刁钻的客人想要为难老板，于是一连10天跑去酒馆打酒，第一天只打一两，第二天打二两，第三天打三两，$\cdots\cdots$，第十天打十两。如果你是酒馆的老板，你如何应对这个客人的要求？
\end{question}
\begin{proof}[提示]
  类似地，可不停试验。

  其实可以归结为$7x+11y=1$的整数解问题，其解法参考第~\ref{chap:diophantine-equation}章~\nameref{chap:diophantine-equation}。其一个特解是$x=-3$，$y=2$。所以2个11两的倒满7两3次，可剩1两。$7x+11y=k$问题类似，其中$k$是任意正整数。
\end{proof}


\begin{example}
  小毛是学校出名的机灵鬼，也是家里让人头疼的调皮蛋。有一天他急急忙忙写完作业就要出动玩，妈妈便说还有一道题，要做完了才能出去玩。妈妈的题目是这样的：有6个杯子排成一排，前面3个装满了水，后面3个是空的。若只能移动一个杯子，能否将装满水的水杯与空杯间隔开？
\end{example}
\begin{proof}[提示]
  若“移动”还包括倒水的动作，那么是有可能的。只需要将前三杯中间的杯子里的水倒到后三杯中间的空杯子里，然后再放回原位即可。
  \begin{center}
    \begin{tikzpicture}[scale=1.0]
      \foreach \x in {0,1,2,3,4,5}{
      \begin{scope}[shift={(2 * \x,0)}]
        \coordinate(A)at(0,1.2);
        \coordinate(B)at(0.2,0);
        \coordinate(C)at(0.6,0);
        \coordinate(D)at(0.8,1.2);
        \coordinate(W1)at(0.05,1);
        \coordinate(W2)at(0.1,1.1);
        \coordinate(W3)at(0.2,1);
        \coordinate(W4)at(0.3,1.1);
        \coordinate(W5)at(0.4,1);
        \coordinate(W6)at(0.5,1.1);
        \coordinate(W7)at(0.6,1);
        \coordinate(W8)at(0.7,1.1);
        \coordinate(W9)at(0.75,1);
        \ifthenelse{\x<3}{
          \fill[pattern=dots,pattern color=blue!30](W1)--(W2)--(W3)--(W4)--(W5)--(W6)--(W7)--(W8)--(W9)--(C)--(B)--cycle;
          \draw[color=blue!30](W1)--(W2)--(W3)--(W4)--(W5)--(W6)--(W7)--(W8)--(W9);
        }{}
        \draw(A)--(B)--(C)--(D);
      \end{scope}
      }
      \node(X)at(2.4,-.2){};
      \node(Y)at(8.4,-.2){};
      \draw[->](X) to[out=330,in=210](Y);
      \node at(5.4,-.7){倒水};
    \end{tikzpicture}
  \end{center}
  % don't show qed symbol for this example only
  \let\qed\relax
\end{proof}

\begin{example}[爱因斯坦难题]\label{ex:einstein's-problem}
  在一条街上,有5座房子，喷了5种颜色。每个房子了住着不同国籍的人，每个人
  喝着不同的饮料，抽不同品牌的香烟，养着不同的宠物，这有一些他们的信
  息：
  \begin{enumerate}
  \item 英国人住在红房子里，
  \item 瑞典人养了一条狗，
  \item 丹麦人喝茶，
  \item 绿房子在白房子左边(注：是指紧挨着的左边)，
  \item 绿房子主人喝咖啡，
  \item 抽PALL MALL烟的人养了一只鸟，
  \item 黄房子主人抽DUNHILL烟，
  \item 住在中间那间房子的人喝牛奶，
  \item 挪威人住第一间房子，
  \item 抽BLENDS烟的人住在养猫人的旁边，
  \item 养马的人住在DUNHILL烟的人旁边，
  \item 抽BLUE MASTER烟的人喝啤酒，
  \item 德国人抽PRINCE烟，
  \item 挪威人住在蓝房子旁边，
  \item 抽BLENDS烟的人的邻居喝矿泉水。
  \end{enumerate}
  那么谁在养鱼？
\end{example}
\begin{proof}[提示]
  做表格，一个个排除，一个个填，与数独类似。

  首先由(8)和(9)，可以先填入下表：
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2 & 3    & 4 & 5\\\hline
        颜色     &        &   &      &   &  \\\hline
        国籍     & 挪威人 &   &      &   &  \\\hline
        饮料     &        &   & 牛奶 &   &  \\\hline
        烟       &        &   &      &   &  \\
        宠物     &        &   &      &   &  \\
        \hline
      \end{tabular}
    \end{center}

    再由(14)，填入蓝房子
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2  & 3    & 4 & 5\\\hline
        颜色     &        & 蓝 &      &   &  \\\hline
        国籍     & 挪威人 &    &      &   &  \\\hline
        饮料     &        &    & 牛奶 &   &  \\\hline
        烟       &        &    &      &   &  \\\hline
        宠物     &        &    &      &   &  \\
        \hline
      \end{tabular}
    \end{center}

    再由(1)和(4)，红、绿、白房子只能都在3、4 、5号房子里，从而1号是黄房子。由(7)可填入1号房子主人抽什么。再由(11)可填入马。
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2  & 3    & 4 & 5\\\hline
        颜色     & 黄     & 蓝 &      &   &  \\\hline
        国籍     & 挪威人 &    &      &   &  \\\hline
        饮料     &        &    & 牛奶 &   &  \\\hline
        烟       & DUNHILL&    &      &   &  \\\hline
        宠物     &        & 马 &      &   &  \\
        \hline
      \end{tabular}
    \end{center}

    再由(4)，“绿白”要紧挨着填入，只能填“34”或“45”号房子。由(5)，“绿”不能是3号房子，从而“绿白”要填入“45”号房子，继而3号房子是红房子，再由(1)，填入英国人。由(5)填入咖啡。
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2  & 3     & 4     & 5\\\hline
        颜色     & 黄     & 蓝 & 红    & 绿    &白\\\hline
        国籍     & 挪威人 &    & 英国人&       &  \\\hline
        饮料     &        &    & 牛奶  & 咖啡  &  \\\hline
        烟       & DUNHILL&    &       &       &  \\\hline
        宠物     &        & 马 &       &       &  \\
        \hline
      \end{tabular}
    \end{center}

    此时，划掉已经无用的条件，剩余如下：
    \begin{enumerate}
    \item \sout{英国人住在红房子里，}
    \item 瑞典人养了一条狗，
    \item 丹麦人喝茶，
    \item \sout{绿房子在白房子左边(注：是指紧挨着的左边)，}
    \item \sout{绿房子主人喝咖啡，}
    \item 抽PALL MALL烟的人养了一只鸟，
    \item \sout{黄房子主人抽DUNHILL烟，}
    \item \sout{住在中间那间房子的人喝牛奶，}
    \item \sout{挪威人住第一间房子，}
    \item 抽BLENDS烟的人住在养猫人的旁边，
    \item \sout{养马的人住在DUNHILL烟的人旁边，}
    \item 抽BLUE MASTER烟的人喝啤酒，
    \item 德国人抽PRINCE烟，
    \item \sout{挪威人住在蓝房子旁边，}
    \item 抽BLENDS烟的人的邻居喝矿泉水。
    \end{enumerate}

    由(3)，“丹麦人”和“喝茶”两个一起填入的只剩下2号和5号房。由(12)，“抽BLUE MASTER”和“喝啤酒”两个一起填入的也只剩下2号和5号房。再由(15)，还有人“喝矿泉水”。此时可知“喝矿泉水”的是1号房，并且2号房抽BLENDS烟。
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2      & 3     & 4     & 5\\\hline
        颜色     & 黄     & 蓝     & 红    & 绿    &白\\\hline
        国籍     & 挪威人 &        & 英国人&       &  \\\hline
        饮料     & 矿泉水 &        & 牛奶  & 咖啡  &  \\\hline
        烟       & DUNHILL& BLENDS &       &       &  \\\hline
        宠物     &        & 马     &       &       &  \\
        \hline
      \end{tabular}
    \end{center}

    此时再由(12)，能够一起填入抽BLUE MASTER和喝啤酒的就只剩下5号房了，从而可在5号房填入BLUE MASTER和啤酒。这样之后由(3)，丹麦人和苶就只能填在2号房了。再划掉(3)、(12)，表格及剩余条件如下。
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2      & 3     & 4     & 5           \\\hline
        颜色     & 黄     & 蓝     & 红    & 绿    &白           \\\hline
        国籍     & 挪威人 & 丹麦人 & 英国人&       &             \\\hline
        饮料     & 矿泉水 & 茶     & 牛奶  & 咖啡  &啤酒         \\\hline
        烟       & DUNHILL& BLENDS &       &       &BLUE MASTER  \\\hline
        宠物     &        & 马     &       &       &  \\
        \hline
      \end{tabular}
    \end{center}

    \begin{enumerate}
    \item \sout{英国人住在红房子里，}
    \item 瑞典人养了一条狗，
    \item \sout{丹麦人喝茶，}
    \item \sout{绿房子在白房子左边(注：是指紧挨着的左边)，}
    \item \sout{绿房子主人喝咖啡，}
    \item 抽PALL MALL烟的人养了一只鸟，
    \item \sout{黄房子主人抽DUNHILL烟，}
    \item \sout{住在中间那间房子的人喝牛奶，}
    \item \sout{挪威人住第一间房子，}
    \item 抽BLENDS烟的人住在养猫人的旁边，
    \item \sout{养马的人住在DUNHILL烟的人旁边，}
    \item \sout{抽BLUE MASTER烟的人喝啤酒，}
    \item 德国人抽PRINCE烟，
    \item \sout{挪威人住在蓝房子旁边，}
    \item 抽BLENDS烟的人的邻居喝矿泉水。
    \end{enumerate}

    此时由(13)，德国人抽PRINCE烟只能在4号房。由(2)，剩下的瑞典人养狗只能在5号房。由(6)，PALL MALL烟和养鸟在3号房。
    \begin{center}
      \renewcommand*{\arraystretch}{1.0}
      \begin{tabular}{l|l|l|l|l|l}
        \hline
        房号     & 1      & 2      & 3         & 4     & 5           \\\hline
        颜色     & 黄     & 蓝     & 红        & 绿    &白           \\\hline
        国籍     & 挪威人 & 丹麦人 & 英国人    & 德国人&瑞典人       \\\hline
        饮料     & 矿泉水 & 茶     & 牛奶      & 咖啡  &啤酒         \\\hline
        烟       & DUNHILL& BLENDS & PALL MALL & PRINCE&BLUE MASTER  \\\hline
        宠物     &        & 马     & 鸟        &       &狗           \\
        \hline
      \end{tabular}
    \end{center}

    此时由(10)，养猫只能在1号房。从而表格中只剩余4号房养什么宠物未知。而由题目是问谁养鱼，故养鱼只能填在4号房。
\end{proof}

\begin{example}
  六所房子排成一排，每所房子颜色不同，每位屋主来自不同的地方，吃着不同的水果，喝着不同的饮料，喜欢不同的运动，养不同的宠物。下面是关于他们的一些信息：\
  \begin{enumerate}%\vspace{-2cm}
  \begin{multicols}{2}
  \item 前3位无养鸡和吃葡萄者。
  \item 吃桔子的人也养马。
  \item 北京人在养鸟者旁边。
  \item 湖南人住黄房子。
  \item 四川人旁边的人吃桔子。
  \item 绿房子的主人吃西瓜。
  \item 上海人在白房子旁边。
  \item 江苏人喜欢打排球。
  \item 红色屋主喝牛奶。
  \item 养猫人在第一所房子。
  \item 打篮球的人养狗。
  \item 喝咖啡的人吃香蕉。
  \item 打棒球的人养鸡。
  \end{multicols}%\vspace{-2cm}
  \item 喝茶者在喝矿泉水者的右边
  \item 爱吃香蕉者和打棒球者住在中间（第3、4位置）
  \item 后3位中没有黑房子，有吃苹果者。
  \item 篮球、垒球、足球，这3项运动的爱好者互不相邻。
  \item 上海人和黑房子之间隔有3个位置。
  \item 白色房子既不在中间，也不在最后，与蓝房子相邻。
  \item 喝可乐者和山东人之间仅隔喝啤酒者。
  \item 爱吃苹果的人也爱打桌球。
  \item 吃桃子者与打桌球者之间仅隔扔垒球者。
  \end{enumerate}
那么谁养鱼？
\end{example}

\newcolumntype{Y}{>{\centering\arraybackslash}X}
\begin{center}
  %https://tex.stackexchange.com/questions/60601/evenly-distributing-column-widths
  
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1 & 2 & 3 & 4 & 5 & 6\\\hline
    颜色 &   &   &   &   &   &  \\\hline
    地方 &   &   &   &   &   &  \\\hline
    水果 &   &   &   &   &   &  \\\hline
    饮料 &   &   &   &   &   &  \\\hline
    运动 &   &   &   &   &   &  \\\hline
    宠物 &   &   &   &   &   &  \\\hline
  \end{tabularx}
\end{center}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
先根据(10)，填猫。根据(1)、(13)和(15)，填棒球、鸡和香蕉。再由(12)填入咖啡。
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1 & 2 & 3     & 4 & 5 & 6\\\hline
    颜色 &   &   &       &       &   &  \\\hline
    地方 &   &   &       &       &   &  \\\hline
    水果 &   &   & 香蕉  &       &   &  \\\hline
    饮料 &   &   & 咖啡  &       &   &  \\\hline
    运动 &   &   &       & 棒球  &   &  \\\hline
    宠物 & 猫&   &       & 鸡    &   &  \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
由(21)和(22)，苹果、桌球、桃子和垒球只能是以下两种排列方式：\nopagebreak
\begin{center}
  \begin{tabular}{|c|c|c|}
    \hline
    \BKC 苹果 & & \BKC 桃子\\\hline
    & & \\\hline
    \BKC 桌球 & \BKC 垒球 &\\\hline
  \end{tabular}
  \hspace{2cm}
  \begin{tabular}{|c|c|c|}
    \hline
    \BKC 桃子 & & \BKC 苹果\\\hline
    & & \\\hline
     & \BKC 垒球 & \BKC 桌球\\\hline
  \end{tabular}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
再由(16)苹果在4/5/6号房，从而只有上面第二种排列能放入到表格中：\nopagebreak
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1 & 2 & 3     & 4    & 5    & 6   \\\hline
    颜色 &   &   &       &      &      &     \\\hline
    地方 &   &   &       &      &      &     \\\hline
    水果 &   &   & 香蕉  & \BKC 桃子  &      & \BKC 苹果 \\\hline
    饮料 &   &   & 咖啡  &      &      &     \\\hline
    运动 &   &   &       & 棒球  & \BKC 垒球 & \BKC 桌球 \\\hline
    宠物 & 猫&   &       & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
由(17)，足球、篮球占据了房间1和3。由(11)，打篮球养狗的人只能在(3)，从而足球在(1)。由(8)，剩下打排球的江苏人在(2)。由(1)，葡萄在(5)。\nopagebreak
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2 & 3     & 4    & 5    & 6   \\\hline
    颜色 &     &   &       &      &      &     \\\hline
    地方 &     & \BKC 江苏  &       &      &      &     \\\hline
    水果 &     &   & 香蕉  & 桃子  & \BKC 葡萄 & 苹果 \\\hline
    饮料 &     &   & 咖啡  &      &      &     \\\hline
    运动 & \BKC 足球 & \BKC 排球 & \BKC 篮球   & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  &   & \BKC 狗    & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
此时剩余1号房和2号房两种水果。由(5)，桔子不能在1号房，从而桔子在2号房。由(6)，填入绿色和西瓜。由(2)，填入马。\nopagebreak
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2     & 3     & 4    & 5    & 6   \\\hline
    颜色 & \BKC 绿色 &      &       &      &      &     \\\hline
    地方 &     & 江苏  &       &      &      &     \\\hline
    水果 & \BKC 西瓜 & \BKC 桔子 & 香蕉  & 桃子  & 葡萄 & 苹果 \\\hline
    饮料 &     &     & 咖啡   &      &      &     \\\hline
    运动 & 足球 & 排球 & 篮球   & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  & \BKC 马  & 狗    & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
由(16)，黑色在2号或3号，从而由(18)，上海在6号或7号(不存在)，从而黑色在2号，上海在6号。由(19)，白色在5号。
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2     & 3    & 4    & 5    & 6   \\\hline
    颜色 & 绿色 & \BKC 黑色 &  & % \BKC 黄
    & \BKC 白色  &     \\\hline
    地方 &     & 江苏  &      & % \BKC 湖南
    &      & \BKC 上海 \\\hline
    水果 & 西瓜 & 桔子 & 香蕉  & 桃子  & 葡萄 & 苹果 \\\hline
    饮料 &     &      & 咖啡  &      &      &     \\\hline
    运动 & 足球 & 排球 & 篮球  & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  &  马  & 狗    & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
由(19)，蓝色在4、6。由(9)，红色在4、6。从而由(4)，剩余的一个黄色在3，填入湖南与黄色。由(5)，四川人在1号。
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2     & 3   & 4    & 5    & 6   \\\hline
    颜色 & 绿色 & 黑色 & \BKC 黄色 &    & 白色  &     \\\hline
    地方 & \BKC 四川 & 江苏  & \BKC 湖南 &     &      & 上海 \\\hline
    水果 & 西瓜 & 桔子 & 香蕉  & 桃子  & 葡萄 & 苹果 \\\hline
    饮料 &     &      & 咖啡  &      &      &     \\\hline
    运动 & 足球 & 排球 & 篮球  & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  &  马  & 狗    & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
由(20)，山东、可乐、啤酒的排列形式只有以下两种：
\begin{center}
  \begin{tabular}{|c|c|c|}
    \hline
    \BKC 山东 &     &\\\hline
         &     &\\\hline
         & \BKC 啤酒 & \BKC 可乐\\\hline
  \end{tabular}\hspace{2cm}
  \begin{tabular}{|c|c|c|}
    \hline
         &     & \BKC 山东\\\hline
         &     &\\\hline
     \BKC 可乐& \BKC 啤酒 & \\\hline
  \end{tabular}\vspace{.5cm}
\end{center}
\end{minipage}
由此容易将表格剩余内容填满。

% \makeatletter
% \newcommand{\thickhline}{%
%     \noalign {\ifnum 0=`}\fi \hrule height 1pt
%     \futurelet \reserved@a \@xhline
% }
% \newcolumntype{"}{@{\vrule width 1pt\hskip\tabcolsep}}
% \newcolumntype{!}{@{\hskip\tabcolsep\vrule width 1pt}}
% \makeatother

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2     & 3   & 4    & 5    & 6   \\\hline
    颜色 & 绿色 & 黑色 & 黄色 &    & 白色  &     \\\hline
    地方 & 四川 & 江苏  & 湖南 & \BKC 山东 &      & 上海 \\\hline
    水果 & 西瓜 & 桔子 & 香蕉  & 桃子  & 葡萄 & 苹果 \\\hline
    饮料 &     &      & 咖啡  &      & \BKC 啤酒 & \BKC 可乐 \\\hline
    运动 & 足球 & 排球 & 篮球  & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  &  马  & 狗    & 鸡    &      &     \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

由(3)和(19)，填入北京、鸟、红色、牛奶。所以是\underline{北京人养鱼}。

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{7}{|Y}}
    \hline
    房间 & 1   & 2     & 3   & 4    & 5    & 6   \\\hline
    颜色 & 绿色 & 黑色 & 黄色 & \BKC 红色 & 白色  &     \\\hline
    地方 & 四川 & 江苏  & 湖南 & 山东 & \BKC 北京 & 上海 \\\hline
    水果 & 西瓜 & 桔子 & 香蕉  & 桃子  & 葡萄 & 苹果 \\\hline
    饮料 &     &      & 咖啡  & \BKC 牛奶 & 啤酒 & 可乐 \\\hline
    运动 & 足球 & 排球 & 篮球  & 棒球  & 垒球 & 桌球 \\\hline
    宠物 & 猫  &  马  & 狗    & 鸡    &      & \BKC 鸟 \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}


\begin{question}
  小赵、小张、小王、小李、小白，这五人喜欢不同的运动，喜欢吃不同的食物，
  每个人都有一个老婆，这天他们同时到希尔顿去吃饭，分别坐了不同的包间，
  五个包间同在一侧，排列在一起。在这一侧有且只有五个包间。请根据下面提
  示回答，杨玉环是谁的老婆。

  \begin{enumerate}
  \item 苏州包间在伦敦包间的左边（隔壁）
  \item 在大理包间的主人喜欢打乒乓球
  \item 喜欢打篮球的人有一个喜欢吃猪肉的邻居
  \item 小李的包间在最左边
  \item 黄蓉的老公在喜欢打乒乓球的人旁边
  \item 喜欢打篮球的人的包间在赵飞燕的老公的包间隔壁
  \item 小赵的包间名字叫东京
  \item 喜欢打网球的人老婆名叫苏蓉蓉
  \item 小张喜欢跑步
  \item 小白的老婆是任盈盈
  \item 苏州包间主人喜欢吃梨
  \item 小王喜欢吃苹果
  \item 在中间那个包间的人喜欢吃牛肉
  \item 小李的包间在纽约包间的旁边
  \item 喜欢游泳的人爱吃土豆
  \end{enumerate}
\end{question}

\begin{proof}[提示]
  根据线索，依次填入表格。
  \begin{itemize}
  \item 首先可以填完比较明显的线索：小李、纽约、牛肉。
  \item 再根据苏州、伦敦、梨的关系，苏州、梨只能是在第4列，伦敦在第5列。
  \item 再填入小赵、东京。
  \item 再填大理、乒乓球。
\end{itemize}

\noindent\begin{minipage}{\textwidth}\setlength{\parindent}{2em}
\begin{center}
  \begin{tabularx}{\textwidth}{|c *{6}{|Y}}
    \hline
         & 1    & 2    & 3     & 4    & 5    \\\hline
    包间 & 大理 & 纽约 & 东京  & 苏州 & 伦敦 \\\hline
    主人 & 小李 &      & 小赵  &      &      \\\hline
    运动 & 乒乓 &      &       &      &      \\\hline 
    食物 &      &      & 牛肉  & 梨   &      \\\hline
    老婆 &      &      &       &      &      \\\hline
  \end{tabularx}\vspace{.5cm}
\end{center}
\end{minipage}

此时，根据游泳、土豆、小王、苹果，可知2、5列的食物被土豆、苹果占满，剩余一个食物猪肉只能在第1列。其余依次填入即可。
\end{proof}



\begin{example}
  黛西参加学校举行的小学生数学比赛，比赛结束后，艾玛问黛西得了第几名，黛西故意卖关子，说：“我考的分数、名次和我的年龄的乘积是1958，你猜猜看。”请算算黛西的分数、名次和年龄。
\end{example}
\begin{proof}[提示]
  将由于$1958=2\times11\times 89$，1958有如下的三数连乘分解方式，并注意到黛西，有
  \begin{align*}
    \setlength\arraycolsep{2pt}
    \begin{array}{cccccccl}
    1958&=&1 & \times & 1  &\times & 1958 &\quad\implies\text{年龄是1或1958，不可能}\hfill\\
    1958&=&1 & \times & 2  &\times & 979  &\quad\implies\text{年龄是1、2或者979，不可能}\hfill\\
    1958&=&1 & \times & 11 &\times & 178  &\quad\implies\text{年龄可能是11，分数可能是1或者179}\\
    1958&=&1 & \times & 22 &\times & 89   &\quad\implies\text{年龄不可能}\\
    1958&=&2 & \times & 11 &\times & 89   &\quad\implies\text{年龄可能是11，分数可能是2或者89}
    \end{array}
  \end{align*}
  由此，出现的数字有1、2、11、22、89、178、979、1958共8个。
  
  第一个信息：小学生。由此年龄只能是11岁。
  
  第二个信息：参加比赛。能参加比赛的，成绩一般不会太差，排除分数不在$[0,100]$区间且分数特别低的比如1分2分的情况，从而只剩下11岁89分第2名这种情况。
\end{proof}

\begin{example}[失窃的艺术品]
  一件艺术失窃案发生后，警察询问了六名嫌疑人是谁干的。图~\ref{fig:statements-of-suspects}是他们的陈述。

  % \begin{multicols}{3}
  % Alex说：
  % \begin{enumerate}
  % \item 不是Blake；
  % \item 不是Drew；
  % \item 不是Emery。
  % \end{enumerate}

  % Blake说：
  % \begin{enumerate}
  % \item 不是Alex；
  % \item 不是Chris；
  % \item 不是Emery。
  % \end{enumerate}

  % Chris说：
  % \begin{enumerate}    
  % \item 不是Blake；
  % \item 不是Frankie；
  % \item 不是Emery。
  % \end{enumerate}

  % Drew说：
  % \begin{enumerate}
  % \item 不是Alex；
  % \item 不是Frankie；
  % \item 不是Chris。
  % \end{enumerate}

  % Emery说：
  % \begin{enumerate}
  % \item 不是Chris；
  % \item 不是Drew；
  % \item 不是Frankie。
  % \end{enumerate}

  % Frankie说：
  % \begin{enumerate}
  % \item 不是Chris；
  % \item 不是Drew；
  % \item 不是Alex。
  % \end{enumerate}

  % \end{multicols}

  \begin{figure}[htbp]
    \centering
    \begin{tikzpicture}[scale=1.0]
      \begin{scope}[shift={(0,0)}]
        \node[text width=3.5cm,rotate=30] at (0,0) {\fbox{\vbox{
            Alex说：
            \begin{enumerate}
            \item 不是Blake；
            \item 不是Drew；
            \item 不是Emery。
            \end{enumerate}
          }}};
      \end{scope}
      \begin{scope}[shift={(4.5,0)}]
        \node[text width=3.5cm,rotate=0] at (0,0) {\fbox{\vbox{
              Blake说：
              \begin{enumerate}
              \item 不是Alex；
              \item 不是Chris；
              \item 不是Emery。
              \end{enumerate}
          }}};
      \end{scope}
      \begin{scope}[shift={(9,0)}]
        \node[text width=3.5cm,rotate=-30] at (0,0) {\fbox{\vbox{
              Chris说：
              \begin{enumerate}    
              \item 不是Blake；
              \item 不是Frankie；
              \item 不是Emery。
              \end{enumerate}
          }}};
      \end{scope}


      \begin{scope}[shift={(0,-4.5)}]
        \node[text width=3.5cm,rotate=-30] at (0,0) {\fbox{\vbox{
              Drew说：
              \begin{enumerate}
              \item 不是Alex；
              \item 不是Frankie；
              \item 不是Chris。
              \end{enumerate}
          }}};
      \end{scope}
      \begin{scope}[shift={(4.5,-4.5)}]
        \node[text width=3.5cm,rotate=0] at (0,0) {\fbox{\vbox{
              Emery说：
              \begin{enumerate}
              \item 不是Chris；
              \item 不是Drew；
              \item 不是Frankie。
              \end{enumerate}
          }}};
      \end{scope}
      \begin{scope}[shift={(9,-4.5)}]
        \node[text width=3.5cm,rotate=30] at (0,0) {\fbox{\vbox{
              Frankie说：
              \begin{enumerate}
              \item 不是Chris；
              \item 不是Drew；
              \item 不是Alex。
              \end{enumerate}
            }}};
      \end{scope}
    \end{tikzpicture}
    \caption{嫌疑人供词}
    \label{fig:statements-of-suspects}
  \end{figure}
  
  经过调查，警察发现他们当中恰好有四个人每人说了一句假话，其余所有话都是真的。那么，到底罪犯是谁？  
\end{example}
\begin{proof}[提示]
  还是用假设--排除的方法。
  \begin{enumerate}
  \item 假设Alex是罪犯，那么可以得到下面的表格。
    \begin{center}
    \begin{tabular}{cccccc}
      \toprule
      Alex & Blake & Chris & Drew & Emery & Frankie\\\midrule
      $\checkmark\checkmark\checkmark$ & $\xmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$ & $\xmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$ & $\checkmark\checkmark\xmark$\\                                         
      \bottomrule
    \end{tabular}
    \end{center}
    其中$\xmark$表示一句假话，$\checkmark$表示一句真话。由上表可以看到，只有3个人每人说了一句假话，与恰好有4人每人说了一句假话矛盾。
    
  \item 假设Blake是罪犯，那么有
    \begin{center}
      \begin{tabular}{cccccc}
        \toprule
        Alex & Blake & Chris & Drew & Emery & Frankie\\\midrule
        $\xmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$ & $\xmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$ & $\checkmark\checkmark\checkmark$\\
        \bottomrule
      \end{tabular}
    \end{center}
  \item 依此类推，若能排除五人，剩余一人不能排除，则剩余的人就是罪犯了。\hfill $\qedhere$
  \end{enumerate}
\end{proof}

\begin{example}
  在一场数学竞赛里，Alvin、Brian和Carlos都获得了一枚奖牌，其中一人得了金牌，一人得了银牌，一人得了铜牌。David猜：“Alvin得了金牌，Brian没得金牌，Carlos没得铜牌。”事实上David只猜对了一个。那么三人分别得了什么奖牌？
\end{example}
\begin{proof}[提示]
  三人三种奖牌，即三奖牌的全排列，共有$P_3^3=3!=3\times2\times1=6$种，如表~\ref{tab:permutation-of-medals}所示：
  \begin{table}[htbp]
    \centering
    \caption{三种奖牌的全排列}
    \label{tab:permutation-of-medals}
    \begin{tabular}{ccccc}
      \toprule
      序号 & Alvin & Brian & Carlos & David的猜测\\\midrule
      1    & 金    & 银    & 铜     & $\checkmark\checkmark\xmark$\\
      2    & 金    & 铜    & 银     &\\
      3    & 银    & 金    & 铜     &\\
      4    & 银    & 铜    & 金     &\\
      5    & 铜    & 金    & 银     &\\
      6    & 铜    & 银    & 金     &\\\bottomrule
    \end{tabular}
  \end{table}

  分析每一种情况。比如，假设是第一种，那么David的三句猜测的对错如表~\ref{tab:permutation-of-medals}所示。可见David猜对了两人，矛盾，可排除这种情况。其余类推。若最后只剩余一种情况无法排除，那就是它了。
\end{proof}


\begin{example}[找火车]
  在一个洞察力大赛中，5名参赛者在桌子边上一字排开，他们从桌上的图案中观察到的飞机数量有$(26,86,123,174,250)$，观察到的火车数则有$(5,42,45,98,105)$，而他们的年龄则分别为$(21,23,31,36,40)$。根据下面的信息，请判断各人的位置，年龄，观察到的飞机和火车数量以及衣服的颜色。
  \begin{enumerate}
  \item Simon找到的火车比他找到的飞机少44；
  \item Keith的年龄是36；
  \item 最右边的人比Simon年轻8岁，并且他找到了174架飞机；
  \item James穿着米黄色的衣服，并且跟Simon比起来他找到的火车数少了37；
  \item 穿着绿色衣服的人比他左手边的人年轻19岁；
  \item Steven找到了105辆火车和250架飞机；
  \item 站中间的人是31岁，穿着蓝色的衣服，并且他找到了42辆火车；
  \item Alan站在最左边，找到了26架飞机，并且他找到的火车数量比他找到的飞机数量多了72；
  \item 穿红衣服的人比Keith大4岁，并且不在穿蓝衣服的人的旁边；
  \item 在31岁的人旁边但不在找到26架飞机的人旁边的那个人穿着橙色的衣服，找到了45辆火车。
  \end{enumerate}
\end{example}
\begin{proof}[提示]
  首先填入可以直接使用的条件，可得表~\ref{tab:contester-info-of-train-spotting}。然后再作一个年龄差值表，如表~\ref{tab:contester-info-of-age-diff}所示。
  \begin{table}[htbp]
    \centering
    \caption{洞察力比赛参赛者信息}
    \label{tab:contester-info-of-train-spotting}
    \begin{tabularx}{.8\textwidth}{|>{\columncolor{LightCyan}}c|*{5}{>{\centering\arraybackslash}X|}}
      \hline
      \rowcolor{LightCyan}
      编号 & 1    & 2 & 3  & 4 & 5\\\hline
      名字 & Alan &   &    &   &  \\\hline
      年龄 &      &   & 31 &   &  \\\hline
      颜色 &      &   & 蓝 &   &  \\\hline
      飞机 & 26   &   &    &   & 174 \\\hline
      火车 & 98   &   & 42 &   &  \\\hline
    \end{tabularx}
  \end{table}

  \begin{table}[htbp]
    \centering
    \caption{年龄差值}
    \label{tab:contester-info-of-age-diff}
    \begin{tabularx}{.6\textwidth}{|>{\columncolor{LightCyan}}c|*{5}{>{\centering\arraybackslash}X|}}
      % \cline{2-6} % \cline not compactible with colortblb
      \hhline{~-----}
      \cline{2-6}
      \rowcolor{LightCyan}
      \multicolumn{1}{c|}{\cellcolor{white}} 
         & 21 & 23 & 31 & 36 & 40\\\hline
      21 &    & 2  & 10 & 15 & 19\\\hline
      23 &    &    &  8 & 13 & 17\\\hline
      31 &    &    &    &  5 & 9 \\\hline
      36 &    &    &    &    & 4 \\\hline
      40 &    &    &    &    &   \\\hline
    \end{tabularx}
  \end{table}
  
  根据(10)，在31岁的人的旁边，但不在找到26架飞机的人的旁边，只能是编号为4的人，从而4号穿橙色衣服且找到了45辆火车
  
  同时观察年龄差值表，每个差值只有一种组合。观察条件(3)，年龄差值为8的年龄组合为23和31，其中Simon年龄较大为31，最右边的年龄较小为23，填入Simon与23。再由(1)，填入Simon找到的飞机数。如下表。
  \begin{center}
    \begin{tabularx}{.8\textwidth}{|>{\columncolor{LightCyan}}c|*{5}{>{\centering\arraybackslash}X|}}
      \hline
      \rowcolor{LightCyan}
      编号 & 1    & 2 & 3     & 4 & 5  \\\hline
      名字 & Alan &   & \cellcolor{blue!25}Simon &   &   \\\hline
      年龄 &      &   & 31    &    & \cellcolor{blue!25}23  \\\hline
      颜色 &      &   & 蓝    & \cellcolor{red!25}橙 &   \\\hline
      飞机 & 26   &   & \cellcolor{blue!25}86    &    & 174 \\\hline
      火车 & 98   &   & 42    & \cellcolor{red!25}45 &     \\\hline
    \end{tabularx}
  \end{center}

  考虑(5)，年龄差为19的组合为21和40。从而21、40可以并且只能填在2、1号，同时填入绿衣服。而由(9)，年龄差为4的组合是36和40，从而40岁的人穿红衣服。
  \begin{center}
    \begin{tabularx}{.8\textwidth}{|>{\columncolor{LightCyan}}c|*{5}{>{\centering\arraybackslash}X|}}
      \hline
      \rowcolor{LightCyan}
      编号 & 1    & 2 & 3     & 4  & 5  \\\hline
      名字 & Alan &   & Simon &    &    \\\hline
      年龄 & \cellcolor{blue!25}40   & \cellcolor{blue!25}21& 31    &    & 23  \\\hline
      颜色 & \cellcolor{blue!25}红   & \cellcolor{blue!25}绿& 蓝    & 橙 &     \\\hline
      飞机 & 26   &   & 86    &    & 174 \\\hline
      火车 & 98   &   & 42    & 45 &     \\\hline
    \end{tabularx}
  \end{center}

  划掉已经用掉的条件，剩余如下：
  \begin{enumerate}
  \item \sout{Simon找到的火车比他找到的飞机少44；}
  \item Keith的年龄是36；
  \item \sout{最右边的人比Simon年轻8岁，并且他找到了174架飞机；}
  \item James穿着米黄色的衣服，并且跟Simon比起来他找到的火车数少了37；
  \item \sout{穿着绿色衣服的人比他左手边的人年轻19岁；}
  \item Steven找到了105辆火车和250架飞机；
  \item \sout{站中间的人是31岁，穿着蓝色的衣服，并且他找到了42辆火车；}
  \item \sout{Alan站在最左边，找到了26架飞机，并且他找到的火车数量比他找到的飞机数量多了72；}
  \item \sout{穿红衣服的人比Keith大4岁，并且不在穿蓝衣服的人的旁边；}
  \item \sout{在31岁的人旁边但不在找到26架飞机的人旁边的那个人穿着橙色的衣服，找到了45辆火车。}
  \end{enumerate}  

  由(4)，填入4号。由(6)，填入2号。
  \begin{center}
    \begin{tabularx}{.8\textwidth}{|>{\columncolor{LightCyan}}c|*{5}{>{\centering\arraybackslash}X|}}
      \hline
      \rowcolor{LightCyan}
      编号 & 1    & 2      & 3     & 4  & 5    \\\hline
      名字 & Alan & \cellcolor{blue!25}Steve  & Simon &    & \cellcolor{red!25}James\\\hline
      年龄 & 40   & 21     & 31    &    & 23   \\\hline
      颜色 & 红   & 绿     & 蓝    & 橙 & \cellcolor{red!25}米黄 \\\hline
      飞机 & 26   & \cellcolor{blue!25}250    & 86    &    & 174  \\\hline
      火车 & 98   & \cellcolor{blue!25}105    & 42    & 45 &      \\\hline
    \end{tabularx}
  \end{center}

  剩余的一一填入即可。
\end{proof}



\section{极端值}
\label{sec:extream-point}

\begin{example}
  有一个考试试卷只有5道题，答对3道或以上就及格。在100个参加考试的人中，有81人答对第一题，91人答对第二题，85人答对第三题，79人答对第四题，74人答对第五题。问这100人中，至少有多少人及格？
\end{example}
\begin{proof}[提示]
  考虑如何才能在满足题目条件的情况下使不及格的人尽可能的多，那么该情况下的及格人数就是及格人数的最少值，为问题之解。

  不及格等价于答错三题或三题以上。
\end{proof}

\section{数理逻辑}
\label{sec:mathematical-logic }

\section{悖论}
\label{sec:paradox}

悖论(Paradox)，也叫佯谬或诡局，是指一种导致矛盾的命题。称之为悖论的命题，如果承认它是真的，经过一系列正确的推理，却又得出它是假的；如果承认它是假的，经过一系列正确的推理，却又得出它是真的。

\begin{example}[白马非马]
  相传，春秋战国时赵国的马匹流行烈性传染病，秦国严防瘟疫传入国内，就在函谷关口贴出告示，禁止赵国马匹入关。这天，正巧公孙龙骑着白马来到函谷关。

关吏说，“你人可入关，但马不能”。

公孙龙辩道：“白马非马，怎么不可以过关？”

关吏说：“白马是马”。

公孙龙说：“我公孙龙是龙吗？”

关吏一愣，但仍坚持说：“按照规定只要是赵国的马就不能入关，管你是白马还是黑马。”

公孙龙微微一笑，道：“‘马’是指名称而言，‘白’是指颜色而说，名称和颜色不是一个概念。‘白马’这个概念，分开来就是‘白’和‘马’或‘马’和‘白’，这是两个不同的概念。比如说你要马，给黄马、黑马可以，但是如果要白马，给黑马、给黄马就不可以，由此证明‘白马’和‘马’不是一回事！所以说白马非马。”

关吏越听越迷糊，被公孙龙这套高谈阔论搞得晕头转向，被侃晕了，不知该如何对答，无奈只好让公孙龙骑白马过关。
\end{example}

这就是历史上著名的白马非马。不过，这应该叫诡辩，而不是悖论。一般人在理解“白马非马”这句话时是理解为白马不属于马，然而公孙龙在论述的过程中偷换了概念来与关吏抬杠，将“非”的“不属于”转换成了“不等同于”，于是“白马非马”就变为了“白马不等同于马”，这就是偷换概念，是诡辩。

\begin{example}[柏拉图---苏格拉底悖论]\mbox{}\par
  柏拉图说：“苏格拉底下面要说的话是真的。”

  苏格拉底说：“柏拉图说的是假的。”
\end{example}

按照以上两句话的信息，柏拉图的话是真的还是假的呢？

如果柏拉图说的是真的，那么苏格拉底说的也是真的，从而柏拉图说的就是假的，矛盾。

如果柏拉图说的是假的，那么苏格拉底说的也是假的，从而柏拉图说的就是真的，矛盾。

这就是悖论，又不能是真，又不能是假，否则逻辑不自恰。


\section{策略}
\label{sec:logic-strategy}

\begin{example}[赛马问题]
  64匹马，8个赛道，至少需要赛多少场才能选出其中最快的4匹？假设没有任何计时设备，每场次中每个赛道最多只能有1匹马，每匹马的速度都不一样，且每匹马体力无限不管赛多少场都能保持一致的成绩。
\end{example}
\begin{example}[赛马简化版]
  可以考虑简化版本，以寻找其中的关键所在。同样的限制条件下，16匹马，4赛道，至少需要赛多少场才能选出其中最快的2匹？

  一场比赛最多只能有4匹马出赛，首先按每组4匹分组可分得4组(此时的分组可以随意分)，对其编号，那么16匹马可以排成下面第一个队形：
  \begin{center}
    \begin{tikzpicture}[scale=.8]
      \begin{scope}[shift={(0,0)}]
        \draw(0,0)grid(4,4);
        \foreach \x/\y/\v in{%
          0/3/A1,1/3/A2,2/3/A3,3/3/A4,
          0/2/B1,1/2/B2,2/2/B3,3/2/B4,
          0/1/C1,1/1/C2,2/1/C3,3/1/C4,
          0/0/D1,1/0/D2,2/0/D3,3/0/D4}{
          \node at(\x+.5,\y+.5){\small $\v$};
          \node at(2,-1){初始分组};
        }
      \end{scope}
      \begin{scope}[shift={(6,0)}]
        \draw(0,0)grid(4,4);
        \foreach \x/\y/\v in{%
          0/3/A1',1/3/A2',2/3/A3',3/3/A4',
          0/2/B1',1/2/B2',2/2/B3',3/2/B4',
          0/1/C1',1/1/C2',2/1/C3',3/1/C4',
          0/0/D1',1/0/D2',2/0/D3',3/0/D4'}{
          \node at(\x+.5,\y+.5){\small $\v$};
          \node at(2,-1){小组赛结束后};
        }
      \end{scope}
      \foreach \u/\v in{1/1,2/3,3/4,4/2}{
        \draw[->](10.2,4.5-\u)--(11.8,4.5-\v);
      }
      \begin{scope}[shift={(12,0)}]
        \fill[pattern=north west lines,pattern color=red!50](2,0)rectangle(4,4);
        \fill[pattern=north east lines,pattern color=blue!50](0,0)rectangle(4,2);
        \fill[color=gray](1,2)rectangle(2,3);
        \draw(0,0)grid(4,4);
        \foreach \x/\y/\v in{%
          0/3/A1',1/3/A2',2/3/A3',3/3/A4',
          0/2/D1',1/2/D2',2/2/D3',3/2/D4',
          0/1/B1',1/1/B2',2/1/B3',3/1/B4',
          0/0/C1',1/0/C2',2/0/C3',3/0/C4'}{
          \node at(\x+.5,\y+.5){\small $\v$};
          \node at(2,-1){小组互换};
        }
      \end{scope}

    \end{tikzpicture}
  \end{center}
  其中每一行是一个小组。然后进行小组赛，每个小组内4匹赛一场，可以得到小组内排名，根据排名，变换小组内顺序，跑得快在前，可以得到第二个队形，其中满足
  \begin{align*}
    A1' > A2' > A3' > A4', \qquad B1' > B2' > B3' > B4'\\
    C1' > C2' > C3' > C4', \qquad D1' > D2' > D3' > D4'
  \end{align*}
  其中$x>y$表示$x$比$y$快。此时共赛了4场。

  然后，将每个小组的第一名共4匹马拉出来赛一场，根据其成绩调整每一行的位置。比如，若比赛结果按快慢排序是$A1'>D1'>B1'>C1'$，那么调整后的队形如第3图所示。此时可以知道$A1'$就是所有马中跑得最快的，并且所有马中跑得最快的前2名一定不在前2列之外，也一定不在前2行之外，所以只剩余左上角4匹马有可能。另外，由于$A1'>D1'>D2'$，从而$D2'$也不可能是是所有马中前2名之一，所以$A2'$与$D1'$其中之一必有一个是所有马中的第2名。从而这两匹马再赛一场即可确定所有马中的第2名。

  总共需要赛$4+1+1=6$场。
\end{example}

\begin{proof}[64匹马问题的提示]
  按简化版本的思路，随机分8组，每组8匹马，每小组赛一场确定小组内的排序，然后各个小组的每1名出来赛一场确定小组间的排序。这样可以得到以下的队形：
  \begin{center}
    \begin{tikzpicture}[scale=.5]
      \fill[pattern=crosshatch,pattern color=gray](0,0)--(8,0)--(8,8)--(4,8)--(4,4)--(0,4)--cycle;
      \fill[color=gray](4,4)--(4,7)--(3,7)--(3,6)--(2,6)--(2,5)--(1,5)--(1,4)--cycle;
      \draw(0,0)grid(8,8);
      \foreach \y/\v in{7/A,6/B,5/C,4/D,3/E,2/F,1/G,0/H}{
        \foreach \x in{1,2,3,4,5,6,7,8}{
          \node at(\x-.5,\y+.5){\tiny $\v\x$};
        }
      }
    \end{tikzpicture}
  \end{center}
  其中队形里每一行从左到右是按从快到慢排序的，第1列从上到下也是按从快到慢排序的。排除掉不可能是前4名的之外，总共还剩余10匹，即图中左上角不带阴影的部分，其中$A1$已经可以确定是最快的第1名。此时总共赛了$8+1=9$场。

  观察此队形，$A4$和$B1$是不能同时出现在前4名里的\footnote{同样互斥的还有$B3$和$C1$，$C2$和$D1$，但这两对互斥的在不知道$A4$与$B1$的比较结果之前，无论是哪一个场景都无法只赛一场就能确定前4名的顺序。$A4$比$B1$快，相当于排除了$B1$及其右边及下边的所有马匹。$B3$比$C1$快，同样相当于排除了$C1$及其右边及下边的所有马匹，但$A2,A3,A4$无法排除。}。而$A4$出现在前4名对应于唯一的一种情况：分组运气特别好，前4名都分到同一组里了，此时前4名为$A1,A2,A3,A4$。所以，$A4$与$B1$再赛一场，如果$A4$比$B1$快，那么可以确定前4名为$A1,A2,A3,A4$，否则$A4$不在前4名里，从而表格中剩余的10匹马中除去$A1,A4$外的8匹再赛一场即可赛出剩余的第2、3、4名。

  所以运气好的时候，10场即可决出前4名的排名，运气不好时则需要11场。
\end{proof}



\section{逻辑益智游戏方格}
\label{sec:logic-puzzle}

爱因斯坦的难题也可以通过Logic Grid Puzzle\footnote{\url{https://en.wikipedia.org/wiki/Logic_puzzle}}的方法来解决。


\begin{example}
  Fill the logic puzzle grid with hints:
  \begin{enumerate}
  \item Bryan likes Spiderman.
  \item Tony doesn't like Superman.
  \item The youngest kid likes Spiderman.
  \item The kid who likes Superman is 8.
  \end{enumerate}
  \begin{center}
    \begin{tikzpicture}[scale=0.5]
      \foreach \xc/\yc/\n/\th/\tw in{2/2/3/4.5/2.5}{
        \fill[color=gray!10](0,0)rectangle(\n,-\n);
        \draw(6, 0) grid (0, -3) grid (3, -6);
        \foreach \y/\xa/\xb in {0/0/6, -3/0/6, -6/0/3}{
          \draw[thick](\xa,\y)--(\xb,\y);
        }
        \foreach \x/\ya/\yb in {0/0/-6, 3/0/-6, 6/0/-3}{
          \draw[thick](\x,\ya)--(\x,\yb);
        }
        \foreach \x in{0,1,2,3,4,5,6}{
          \draw(\x,0)--(\x,\th);
        }
        % \draw(0,3)--(6,3);
        \foreach \x/\t/\ta/\tb/\tc/\c in {0/Heroes/Batman/Spiderman/Superman/red!20,
          3/Age/6/8/10/blue!50}{
          \draw[fill=\c](\x, \th) rectangle (\x + \n, \th + 1) node[midway]{\t};
          \node[rotate=90, anchor=west]at(0.5 + \x, 0){\ta};
          \node[rotate=90, anchor=west]at(1.5 + \x, 0){\tb};
          \node[rotate=90, anchor=west]at(2.5 + \x, 0){\tc};
        }
        \foreach \y in{0,1,2,3,4,5,6}{
          \draw(0,-\y)--(-\tw,-\y);
        }
        \draw(-\tw,0)--(-\tw, -6);
        \foreach \y/\t/\ta/\tb/\tc/\c in {0/Name/Brian/Sean/Tony/red!20,
          3/Age/6/8/10/blue!50}{
          \draw[fill=\c](-\tw, -\y) rectangle (-\tw-1, -\y - \n) node[midway, rotate=90, anchor=center]{\t};
          % \node[rotate=90, anchor=west]at(-4.5, -\y-4){\t};
          \node[left]at(0, -0.5 - \y){\ta};
          \node[left]at(0, -1.5 - \y){\tb};
          \node[left]at(0, -2.5 - \y){\tc};
        }
      }        
    \end{tikzpicture}
  \end{center}

  Fill in each grid a True(e.g. \tikz{\draw[fill=green]circle(0.2);}) or False(e.g.\redcross). Similar to sodoku, there must contain one and only one True mark for every rows and columns in every $4\times 4$ sub-grid.

  From (1), the grids can be filled as the following left
  figure. Considering the (2), (3) and (4) conditions, the right
  figure can be filled.
  \begin{center}
    \begin{tikzpicture}[scale=0.5]
      \foreach \xc/\yc/\n/\th/\tw in{2/2/3/4.5/2.5}{
        \fill[color=gray!10](0,0)rectangle(\n,-\n);
        \draw(6, 0) grid (0, -3) grid (3, -6);
        \foreach \y/\xa/\xb in {0/0/6, -3/0/6, -6/0/3}{
          \draw[thick](\xa,\y)--(\xb,\y);
        }
        \foreach \x/\ya/\yb in {0/0/-6, 3/0/-6, 6/0/-3}{
          \draw[thick](\x,\ya)--(\x,\yb);
        }
        \foreach \x in{0,1,2,3,4,5,6}{
          \draw(\x,0)--(\x,\th);
        }
        % \draw(0,3)--(6,3);
        \foreach \x/\t/\ta/\tb/\tc/\c in {0/Heroes/Batman/Spiderman/Superman/red!20,
          3/Age/6/8/10/blue!50}{
          \draw[fill=\c](\x, \th) rectangle (\x + \n, \th + 1) node[midway]{\t};
          \node[rotate=90, anchor=west]at(0.5 + \x, 0){\ta};
          \node[rotate=90, anchor=west]at(1.5 + \x, 0){\tb};
          \node[rotate=90, anchor=west]at(2.5 + \x, 0){\tc};
        }
        \foreach \y in{0,1,2,3,4,5,6}{
          \draw(0,-\y)--(-\tw,-\y);
        }
        \draw(-\tw,0)--(-\tw, -6);
        \foreach \y/\t/\ta/\tb/\tc/\c in {0/Name/Brian/Sean/Tony/red!20,
          3/Age/6/8/10/blue!50}{
          \draw[fill=\c](-\tw, -\y) rectangle (-\tw-1, -\y - \n) node[midway, rotate=90, anchor=center]{\t};
          % \node[rotate=90, anchor=west]at(-4.5, -\y-4){\t};
          \node[left]at(0, -0.5 - \y){\ta};
          \node[left]at(0, -1.5 - \y){\tb};
          \node[left]at(0, -2.5 - \y){\tc};
        }
      }
      \foreach \x/\y/\t in {1/1/0, 2/1/1, 3/1/0, 2/2/0, 2/3/0}{
        \ifnum\t=1
        \draw[fill=green](\x-0.5,-\y+0.5)circle(0.3);
        \else
        \node at(\x-0.5, -\y+0.5){\redcross};
        \fi
      }

      \begin{scope}[shift={(14,0)}]
        \foreach \xc/\yc/\n/\th/\tw in{2/2/3/4.5/2.5}{
          \fill[color=gray!10](0,0)rectangle(\n,-\n);
          \draw(6, 0) grid (0, -3) grid (3, -6);
          \foreach \y/\xa/\xb in {0/0/6, -3/0/6, -6/0/3}{
            \draw[thick](\xa,\y)--(\xb,\y);
          }
          \foreach \x/\ya/\yb in {0/0/-6, 3/0/-6, 6/0/-3}{
            \draw[thick](\x,\ya)--(\x,\yb);
          }
          \foreach \x in{0,1,2,3,4,5,6}{
            \draw(\x,0)--(\x,\th);
          }
          % \draw(0,3)--(6,3);
          \foreach \x/\t/\ta/\tb/\tc/\c in {0/Heroes/Batman/Spiderman/Superman/red!20,
            3/Age/6/8/10/blue!50}{
            \draw[fill=\c](\x, \th) rectangle (\x + \n, \th + 1) node[midway]{\t};
            \node[rotate=90, anchor=west]at(0.5 + \x, 0){\ta};
            \node[rotate=90, anchor=west]at(1.5 + \x, 0){\tb};
            \node[rotate=90, anchor=west]at(2.5 + \x, 0){\tc};
          }
          \foreach \y in{0,1,2,3,4,5,6}{
            \draw(0,-\y)--(-\tw,-\y);
          }
          \draw(-\tw,0)--(-\tw, -6);
          \foreach \y/\t/\ta/\tb/\tc/\c in {0/Name/Brian/Sean/Tony/red!20,
            3/Age/6/8/10/blue!50}{
            \draw[fill=\c](-\tw, -\y) rectangle (-\tw-1, -\y - \n) node[midway, rotate=90, anchor=center]{\t};
            % \node[rotate=90, anchor=west]at(-4.5, -\y-4){\t};
            \node[left]at(0, -0.5 - \y){\ta};
            \node[left]at(0, -1.5 - \y){\tb};
            \node[left]at(0, -2.5 - \y){\tc};
          }
        }
        \foreach \x/\y/\t in {1/1/0, 2/1/1, 3/1/0, 2/2/0, 2/3/0, 3/3/0,2/4/1, 3/5/1}{
          \ifnum\t=1
          \draw[fill=green](\x-0.5,-\y+0.5)circle(0.3);
          \else
          \node at(\x-0.5, -\y+0.5){\redcross};
          \fi
        }
      \end{scope}
    \end{tikzpicture}
  \end{center}

\end{example}

\begin{example}
Base on the hints:
\begin{enumerate}
\item Exactly one girl has the same initial in her name and in the color of her basket.
\item Trisha is 4 or 6 years old, and had the green or red basket.
\item The girl who collected 28 apples is 1 year older than Trisha.
\item The green basket had 4 apples less than the blue one. The other two baskets belonged to Berenice and the 6-year-old girl.
\item Gina is 5 years old, or she had the white basket. She collected more apples than Berenice.
\item If the 4 years girl had the blue basket, then Gina got 24 apples.
\item The 7-year-old girl didn't collect 20 apples.
\end{enumerate}

Fill the Logic Puzzle Grid, the 4 \redcross of which is filled by the hint (2).

\begin{center}
  \begin{tikzpicture}[scale=0.5]
    % \foreach \rows/\cols/\individuals in{3/3/5}{%4 rows, 4 cols, everty grid contains 5x5 sub-grids
    \fill[color=gray!10](8,0)rectangle(4,-4)rectangle(0,-8);
    \draw(12, 0) grid (0, -4) grid (8, -8) (4, -8) grid (0, -12);
    \foreach \y/\xa/\xb in {0/0/12, -4/0/12, -8/0/8, -12/0/4}{
      \draw[thick](\xa,\y)--(\xb,\y);
    }
    \foreach \x/\ya/\yb in {0/0/-12, 4/0/-12, 8/0/-8, 12/0/-4}{
      \draw[thick](\x,\ya)--(\x,\yb);
    }
    \foreach \x in{0,1,2,3,4,5,6,7,8,9,10,11,12}{
      \draw(\x,0)--(\x,3);
    }
    \draw(0,3)--(12,3);
    \foreach \x/\t/\ta/\tb/\tc/\td/\c in {0/Age/4/5/6/7/red!20,
      4/Basket/blue/green/red/white/blue!50,
      8/Quantity/20/24/25/28/green}{
      \draw[fill=\c](\x, 3) rectangle (\x + 4, 4) node[midway]{\t};
      \node[rotate=90, anchor=south west]at(1 + \x, 0){\ta};
      \node[rotate=90, anchor=south west]at(2 + \x, 0){\tb};
      \node[rotate=90, anchor=south west]at(3 + \x, 0){\tc};
      \node[rotate=90, anchor=south west]at(4 + \x, 0){\td};
    }
    \foreach \y in{0,1,2,3,4,5,6,7,8,9,10,11,12}{
      \draw(0,-\y)--(-4,-\y);
    }
    \draw(-4,0)--(-4, -12);
    \foreach \y/\t/\ta/\tb/\tc/\td/\c in {0/Name/Berenice/Gina/Rachel/Trisha/red!20,
      4/Basket/blue/green/red/white/blue!50,
      8/Quantity/20/24/25/28/green}{
      \draw[fill=\c](-4, -\y) rectangle (-5, -\y - 4) node[midway, rotate=90, anchor=center]{\t};
      % \node[rotate=90, anchor=west]at(-4.5, -\y-4){\t};
      \node[left]at(0, -0.5 - \y){\ta};
      \node[left]at(0, -1.5 - \y){\tb};
      \node[left]at(0, -2.5 - \y){\tc};
      \node[left]at(0, -3.5 - \y){\td};
    }

    \foreach \x/\y/\t in {2/4/0, 4/4/0, 5/4/0, 8/4/0%Trisha
    }{%
      \ifnum\t=1
      \draw[fill=green](\x-0.5,-\y+0.5)circle(0.3);
      \else
      \node at(\x-0.5, -\y+0.5){\redcross};
      \fi
    }

  \end{tikzpicture}
\end{center}

\end{example}


\begin{example}
  10 people line up, s.t. the taller one is behind. Everyone has a hat either black or blue. Everyone can see the color of the hats before him. Do they have a strategy that they can make sure at least 9 people can tell the color of his own hat?

  \begin{center}
    \begin{tikzpicture}[scale=.8]
      \foreach \s/\x/\h in{1cm/15.4/black, 1.2cm/14.2/yellow, 1.3cm/12.9/yellow, 1.4cm/11.5/black, 1.5cm/10/yellow, 1.6cm/8.4/black, 1.7cm/6.7/black, 1.8cm/4.9/yellow, 1.9cm/3/black, 2.0cm/1/yellow}{
        \node[conductor, minimum size=\s, hat=\h] at(\x,0){};
      }      
    \end{tikzpicture}
  \end{center}

  Who to sacrify to help others? The shortest one? No, since he has no information on the color of all the hats. He sacrifies in vain.

  Sacrifice the tallest one to tell the even-odd property of the other nine hats. Then the second tallest can tell the color of his own hat. After that, so could the third tallest. And so on.
\end{example}


\section{广泛流传的经典问题}
\label{sec:classic-puzzles}

\begin{example}[海盗分金\footnote{\url{https://www.mysmth.net/nForum/\#!elite/path?v=\%2Fgroups\%2Frec.faq\%2FIQDoor\%2Ftoold\%2Fgold}, \url{https://omohundro.files.wordpress.com/2009/03/stewart99_a_puzzle_for_pirates.pdf, 英国数学家伊恩·斯图尔特(Ian Stewart)在1999年5月的《科学美国人》上，发表了A Puzzle for Pirate的文章分析了这个问题。所以，你看，数学家们也会考虑这些看上去不正经的问题，比如诺贝尔经济奖得主纳什研究的博弈理论。}}]
  10名海盗抢得了窖藏的100块金子，并打算 瓜分这些战利 品。这是一些讲民主
  的海盗（当然是他们自己特有的民主）， 他们的习惯是按下面的方式进行分配：
  最厉害的一名海盗提出分配方案，然 后所有的海盗（包括提出方案者本人）就
  此方案进行表决。如果50\%或更多的 海盗赞同此方案，此方案就获得通过并据
  此分配战利品。否则提出方案的海 盗将被扔到海里，然后下一名最厉害的海盗
  又重复上述过程。
\end{example}

所有的海盗都乐于看到他们的一位同伙被扔进海里，不过，如果让他们 选择的话，
他们还是宁可得一笔现金。他们当然也不愿意自己被扔到海里。  所有的海盗都
是有理性的，而且知道其他的海盗也是有理性的。此外，没有 两名海盗是同等厉
害的——这些海盗按照完全由上到下的等级排好了座次， 并且每个人都清楚自己和
其他所有人的等级。这些金块不能再分，也不允许 几名海盗共有金块，因为任何
海盗都不相信他的同伙会遵守关于共享金块的 安排。这是一伙每人都只为自己打
算的海盗。

最凶的一名海盗应当提出什么样的分配方案才能使他获得最多的金子呢？
    
为方便起见，我们按照这些海盗 那优 程度来给他们编号。最怯懦的海 盗为1号
海盗，次怯懦的海盗为2号海盗，如此类推。这样最厉害的海盗就应 当得到最大
的编号，而方案的提出就将倒过来从上至下地进行。
    
分析所有这类策略游戏的奥妙就在于应当从结尾出发倒推回去。游戏结 束时，你
容易知道何种决策有利而何种决策不利。确定了这一点后，你就可 以把它用到倒
数第2次决策上，如此类推。如果从游戏的开头出发进行分析， 那是走不了多远
的。其原因在于，所有的战略决策都是要确定：“如果我这 样做，那么下一个人
会怎样做？” 因此在你以下海盗所做的决定对你来说是 重要的，而在你之前的海
盗所做的决定并不重要，因为你反正对这些决定也 无能为力了。
    
记住了这一点，就可以知道我们的出发点应当是游戏进行到只剩两名
海 盗——即1号和2号——的时候。这时最厉害的海盗是2号，而他的最佳分配方 案是
一目了然的：100块金子全归他一人所有，1号海盗什么也得不到。由于 他自己肯
定为这个方案投赞成票，这样就占了总数的50\%，因此方案获得通过。  现在加
上3号海盗。1号海盗知道，如果3号的方案被否决，那么最后将只剩2 个海盗，
而1号将肯定一无所获——此外，3号也明白1号了解这一形势。因此， 只要3号的分
配方案，给1号一点甜头使他不至于空手而归，那么不论3号提出 什么样的分配方
案，1号都将投赞成票。因此3号需要分出尽可能少的一点金子 来贿赂1号海盗，
这样就有了下面的分配方案： 3号海盗分得99块金子，2号海 盗一无所获，1号海
盗得1块金子。4号海盗的策略也差不多。他需要有50\%的支 持票，因此同3号一
样也需再找一人做同党。他可以给同党的最低贿赂是1块金 子，而他可以用这块
金子来收买2号海盗。因为如果4号被否决而3号得以通过， 则2号将一文不名。因
此，4号的分配方案应是：99块金子归自己，3号一块也 得不到，2号得1块金
子，1号也是一块也得不到。5号海盗的策略稍有不同。他 需要收买另两名海盗，
因此至少得用2块金子来贿赂，才能使自己的方案得到 采纳。他的分配方案应该
是：98块金子归自己，1块金子给3号，1块金子给1号。
  
    
这一分析过程可以照着上述思路继续进行下去。每个分配方案都是唯一确定的，
它可以使提出该方案的海盗获得尽可能多的金子，同时又保证该方案肯 定能通过。
照这一模式进行下去，10号海盗提出的方案将是96块金子归他所有，其他编号为
偶数的海盗各得1 块金子，而编号为奇数的海盗则什么也得不到。这就解决
了10名海盗的分配难题。
    
Omohundro的贡献是他把这一问题扩大到有500名海盗的情形，即500名海 盗瓜
分100块金子。显然，类似的规律依然成立——至少是在一定范围内成立。  事实上，
前面所述的规律直到第200号海盗都成立。 200号海盗的方案将是： 从1到199号
的所有奇数号的海盗都将一无所获，而从2到198号的所有偶数号 海盗将各得1块
金子，剩下的1块金子归200号海盗自己所有。
    
乍看起来，这一论证方法到200号之后将不再适用了，因为201号拿不出更 多的金
子来收买其他海盗。但是即使分不到金子，201号至少还希望自己不会 被扔进海
里，因此他可以这样分配：给1到199号的所有奇数号海盗每人1块金 子，自己一
块也不要。202号海盗同样别无选择，只能一块金子都不要了—— 他必须把这100块
金子全部用来收买100名海盗，而且这100名海盗还必须是那 些按照201号方案将
一无所获的人。

由于这样的海盗有101名，因此202号的方案将不再是唯一的——贿赂方
案 有101种。203号海盗必须获得102张赞成票，但他显然没有足够的金子去收
买 101名同伙。因此，无论提出什么样的分配方案，他都注定会被扔到海里去
喂 鱼。不过，尽管203号命中注定死路一条，但并不是说他在游戏进程中不起
任 何作用。相反，204号现在知道，203号为了能保住性命，就必须避免由他
自 己来提出分配方案这么一种局面，所以无论204号海盗提出什么样的方
案，203 号都一定会投赞成票。这样204号海盗总算 男 拣到一条命：他可以得到
他自 己的1票、203号的1票、以及另外100名收买的海盗的赞成票，刚好达到保命
所 需的50\%。获得金子的海盗，必属于根据202号方案肯定将一无所获的
那101名 海盗之列。

205号海盗的命运又如何呢？他可没有这样走运了。他不能指望203号和 204号支
持他的方案，因为如果他们投票反对205号方案，就可以 以掷 祸地 看到205号被
扔到海里去喂鱼，而他们自己的性命却仍然能够保全。这样，无 论205号海盗提
出什么方案都必死无疑。

206号海盗也是如此——他肯定可以得到205号的支持，但这不足以救他一命。类似
地，207号海盗需要104张赞成票——除了他收买的100张赞成票以及他自己的1张赞
成票之外，他还需3张赞成票才能免于一死。他可以获得205 号和206号的支持，
但还差一张票却是无论如何也弄不到了，因此207号海盗的命运也是下海喂鱼。

208号又时来运转了。他需要104张赞成票，而205、206、207号都会支持 他，加
上他自己一票及收买的100票，他得以过关保命。获得他贿赂的必属于 那些根
据204号方案肯定将一无所获的人（候选人包括2到200号中所有偶数号 的海盗、
以及201、203、204 号）。
    
现在可以看出一条新的、此后将一直有效的规律：那些方案能过关的海盗（他们
的分配方案全都是把金子用来收买100名同伙而自己一点都得不到）相 隔的距离
越来越远，而在他们之间的海盗则无论提什么样的方案都会被扔进海 里——因此为
了保命，他们必会投票支持比他们厉害的海盗提出的任何分配方 案。得以避免葬
身鱼腹的海盗包括201、202、204、208、216、232、264、328、 456号，即其号
码等于200加2的某一方幂的海盗。
    
现在我们来看看哪些海盗是获得贿赂的幸运儿。分配贿赂的方法是不唯一 的，其
中一种方法是让201号海盗把贿赂分给1到199号的所有奇数编号的海盗，
  
让202号分给2到200号的所有偶数编号的海盗，然后是让204号贿赂奇数编号的 海
盗，208号贿赂偶数编号的海盗，如此类推，也就是轮流贿赂奇数编号和偶 数编
号的海盗。
    
结论是：当500名海盗运用最优策略来瓜分金子时，头44名海盗必死无疑，
而456号海盗则给从1到199号中所有奇数编号的海盗每人分1块金子，问题就解决
了。由于这些海盗所实行的那种民主制度，他们的事情就搞成了最厉害的一 批海
盗多半都是下海喂鱼，不过有时他们也会觉得自己很幸运——虽然分不到 抢来的金
子，但总可以免于一死。只有最怯懦的200名海盗有可能分得一份脏物，而他们
之中又只有一半的人能真正得到一块金子，的确是怯懦者继承财富。

\begin{example}[Impossible Puzzle, Sum-Product Puzzle\footnote{https://math.stackexchange.com/questions/165311/the-impossible-puzzle-now-i-know-your-product}]
  1969年，荷兰数学家汉斯·弗莱登塔尔(Hans Freudenthal)发表了一个当时被称为“弗莱登塔尔问题”(Freudenthal Problem)的谜题：

  有两个不相等的整数 $x$，$y$ ，它们都大于 1 且和小于 100 ，数学家“和先
  生”知道这两个数的和，数学家“积先生”知道这两个数的积，他们进行了如下对
  话：

  积先生：我不知道 $x$ 和 $y$ 分别是啥。

  和先生：我知道你不知道。

  积先生：我现在知道了。

  和先生：如果你知道了，那我也知道了。

  那么，$x$ 和 $y$ 各是多少？
\end{example}